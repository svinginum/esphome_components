external_components:
  - source: github://svinginum/esphome_components
    refresh: 0s  
sentio:

select:

  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Set modbus mode"
    id: sentio_set_modbus_mode
    address: 0x00005
    force_new_range: true
    use_write_multiple: true
    value_type: U_WORD
    optionsmap:
      "Disabled" : 0
      "Read only" : 1
      "Read/Write" : 2
      "Write with password" : 3

  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Vacation Mode"
    id: sentio_vacation_mode
    address: 27
    force_new_range: true
    use_write_multiple: true
    value_type: U_WORD
    optionsmap:
      "OFF" : 0
      "ON" : 1


sensor:
  # TEST: Try reading a known working address pattern first
  # If channel sensors work at 104, let's try addresses closer to that range
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "TEST - Sentio T2 Inlet"
    id: test_t2_inlet
    unit_of_measurement: "Â°C"
    accuracy_decimals: 2
    device_class: temperature
    register_type: read
    address: 7705  # Try this first
    filters:
      - multiply: 0.01

  # Alternative test with original address
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "TEST2 - Sentio T2 Inlet Alt"
    id: test_t2_inlet_alt
    unit_of_measurement: "Â°C"
    accuracy_decimals: 2
    device_class: temperature
    register_type: read
    address: 0x1C89  # Original address (7305)
    filters:
      - multiply: 0.01

binary_sensor:
  # Test binary sensor - try address 1 first (matching channel pattern)
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "TEST - Sentio Warning"
    id: test_warning
    register_type: read
    address: 1  # Try 1 first (00001 -> 1)
    bitmask: 1
