external_components:
  - source: github://svinginum/esphome_components
    refresh: 0s  

select:

  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Set modbus mode"
    id: sentio_set_modbus_mode
    address: 0x00005
    force_new_range: true
    use_write_multiple: true
    value_type: U_WORD
    optionsmap:
      "Disabled" : 0
      "Read only" : 1
      "Read/Write" : 2
      "Write with password" : 3

  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Vacation Mode"
    id: sentio_vacation_mode
    address: 27
    force_new_range: true
    use_write_multiple: true
    value_type: U_WORD
    optionsmap:
      "OFF" : 0
      "ON" : 1


sensor:
#########################
#### SYSTEM TEMPERATURE SENSORS (T2-T3) ####
#########################
  # Pump State - Input Register 07304
  #- platform: modbus_controller
    #modbus_controller_id: sentio_modbus_controller
    #name: "Sentio Pump State"
    #id: sentio_pump_state
    #register_type: read
    #address: 0x1C88
    #value_type: U_WORD   # Must specify this
    # No filters needed - returns 1=IDLE, 2=ON

  # Measured inlet temperature - Input Register 07705 (HCC1) per PDF
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio T2 - ITC Inlet"
    id: sentio_t2_itc_inlet
    unit_of_measurement: "째C"
    accuracy_decimals: 2
    device_class: temperature
    state_class: measurement
    register_type: read
    address: 7705  # 07705 per PDF. If this doesn't work, try 7704 or 0x1C89 (7305)
    filters:
      - multiply: 0.01  # val_d2_fp100 format

  # Desired inlet temperature - Input Register 07706 (HCC1) per PDF
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Desired Flow Temperature"
    id: sentio_desired_inlet_temp
    unit_of_measurement: "째C"
    accuracy_decimals: 2
    device_class: temperature
    state_class: measurement
    register_type: read
    address: 7706  # 07706 per PDF. If this doesn't work, try 7705 or 0x1C8A (7306)
    filters:
      - multiply: 0.01

  # Measured return temperature - Input Register 07707 (HCC1)
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Return Temperature"
    id: sentio_return_temp
    unit_of_measurement: "째C"
    accuracy_decimals: 2
    device_class: temperature
    state_class: measurement
    register_type: read
    address: 0x1C8B
    filters:
      - multiply: 0.01

  # Main supplier temperature - Input Register 07708 (HCC1)
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Main Supplier Temperature"
    id: sentio_main_supplier_temp
    unit_of_measurement: "째C"
    accuracy_decimals: 2
    device_class: temperature
    state_class: measurement
    register_type: read
    address: 0x1C8C
    filters:
      - multiply: 0.01

binary_sensor:
  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Aggregated Warning"
    id: sentio_aggregated_warning
    address: 0  # 00001 - 1 (0-based addressing for discrete inputs)
    register_type: discrete_input
    bitmask: 0x01

  - platform: modbus_controller
    modbus_controller_id: sentio_modbus_controller
    name: "Sentio Aggregated Error"
    id: sentio_aggregated_error
    address: 1  # 00002 - 1 (0-based addressing for discrete inputs)
    register_type: discrete_input
    bitmask: 0x01
